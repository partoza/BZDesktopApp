@page "/transactionHistory"
@using System.Globalization
@inject IJSRuntime JS

<AuthGuard>
    <div class="grid grid-cols-1 lg:grid-cols-4 md:grid-cols-2 gap-3">
        <!-- Total Transactions Card -->
        <div class="bg-white rounded-xl shadow-sm p-5 border border-gray-200 hover:shadow-md transition-shadow">
            <div class="flex items-center gap-3 mb-1">
                <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
                    <div class="w-8 h-8 bg-gradient-to-r from-emerald-600 to-emerald-500 flex items-center justify-center"
                         style="clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                             class="w-5 h-5 text-white">
                            <path d="M12 7.5a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5z" />
                            <path fill-rule="evenodd" d="M1.5 4.875C1.5 3.839 2.34 3 3.375 3h17.25c1.035 0 1.875.84 1.875 1.875v9.75c0 1.036-.84 1.875-1.875 1.875H3.375A1.875 1.875 0 011.5 14.625v-9.75zM8.25 9.75a3.75 3.75 0 117.5 0 3.75 3.75 0 01-7.5 0zM18.75 9a.75.75 0 00-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 00.75-.75V9.75a.75.75 0 00-.75-.75h-.008zM4.5 9.75A.75.75 0 015.25 9h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75H5.25a.75.75 0 01-.75-.75V9.75z" clip-rule="evenodd" />
                            <path d="M2.25 18a.75.75 0 000 1.5c5.4 0 10.63.722 15.6 2.075 1.19.324 2.4-.558 2.4-1.82V18.75a.75.75 0 00-.75-.75H2.25z" />
                        </svg>
                    </div>
                </div>
                <h2 class="text-base font-medium text-gray-700">Total Transactions</h2>
            </div>

            <div class="ps-14">
                <h3 class="text-2xl font-semibold text-gray-900">@transactions.Count</h3>
                <p class="text-xs text-gray-500 mt-1">As of today</p>

                <div class="flex items-center gap-2 mt-2">
                    <div class="flex items-center text-green-600 px-2 py-1 rounded text-xs font-medium">
                        <span>+ @(transactions.Count(t => t.Amount > 0)) Income</span>
                    </div>
                    <div class="flex items-center text-red-600 px-2 py-1 text-xs font-medium">
                        <span>- @(transactions.Count(t => t.Amount < 0)) Expenses</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Total Revenue Card -->
        <div class="bg-white rounded-xl shadow-sm p-5 border border-gray-200 hover:shadow-md transition-shadow">
            <div class="flex items-center gap-3 mb-1">
                <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
                    <div class="w-8 h-8 bg-gradient-to-r from-emerald-600 to-emerald-500 flex items-center justify-center"
                         style="clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 text-white">
                            <path d="M10.464 8.746c.227-.18.497-.311.786-.394v2.795a2.252 2.252 0 01-.786-.393c-.394-.313-.546-.681-.546-1.004 0-.323.152-.691.546-1.004zM12.75 15.662v-2.824c.347.085.664.228.921.421.427.32.579.686.579.991 0 .305-.152.671-.579.991a2.534 2.534 0 01-.921.42z" />
                            <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v.816a3.836 3.836 0 00-1.72.756c-.712.566-1.112 1.35-1.112 2.178 0 .829.4 1.612 1.113 2.178.502.4 1.102.647 1.719.756v2.978a2.536 2.536 0 01-.921-.421l-.879-.66a.75.75 0 00-.9 1.2l.879.66c.533.4 1.169.645 1.821.75V18a.75.75 0 001.5 0v-.81a4.124 4.124 0 001.821-.749c.745-.559 1.179-1.344 1.179-2.191 0-.847-.434-1.632-1.179-2.191a4.122 4.122 0 00-1.821-.75V8.354c.29.082.559.213.786.393l.415.33a.75.75 0 00.933-1.175l-.415-.33a3.836 3.836 0 00-1.719-.755V6z" clip-rule="evenodd" />
                        </svg>
                    </div>
                </div>
                <h2 class="text-base font-medium text-gray-700">Total Revenue</h2>
            </div>

            <div class="ps-14">
                <h3 class="text-2xl font-semibold text-gray-900">@(transactions.Where(t => t.Amount > 0).Sum(t => t.Amount).ToString("C", CultureInfo.InvariantCulture))</h3>
                <p class="text-xs text-gray-500 mt-1">All time income</p>

                <div class="flex items-center gap-2 mt-2">
                    <div class="flex items-center text-blue-600 px-2 py-1 rounded text-xs font-medium">
                        <span>@(transactions.Count(t => t.Type == "Sales Order")) Sales Orders</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Total Expenses Card -->
        <div class="bg-white rounded-xl shadow-sm p-5 border border-gray-200 hover:shadow-md transition-shadow">
            <div class="flex items-center gap-3 mb-1">
                <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
                    <div class="w-8 h-8 bg-gradient-to-r from-emerald-600 to-emerald-500 flex items-center justify-center"
                         style="clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 text-white">
                            <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z" clip-rule="evenodd" />
                        </svg>
                    </div>
                </div>
                <h2 class="text-base font-medium text-gray-700">Total Expenses</h2>
            </div>

            <div class="ps-14">
                <h3 class="text-2xl font-semibold text-gray-900">@(Math.Abs(transactions.Where(t => t.Amount < 0).Sum(t => t.Amount)).ToString("C", CultureInfo.InvariantCulture))</h3>
                <p class="text-xs text-gray-500 mt-1">All time expenses</p>

                <div class="flex items-center gap-2 mt-2">
                    <div class="flex items-center text-red-600 px-2 py-1 rounded text-xs font-medium">
                        <span>@(transactions.Count(t => t.Type == "Purchase Order")) Purchase Orders</span>
                    </div>
                    <div class="flex items-center text-orange-600 px-2 py-1 text-xs font-medium">
                        <span>@(transactions.Count(t => t.Type == "Expenses")) Expenses</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Net Profit Card -->
        <div class="bg-white rounded-xl shadow-sm p-5 border border-gray-200 hover:shadow-md transition-shadow">
            <div class="flex items-center gap-3 mb-1">
                <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
                    <div class="w-8 h-8 bg-gradient-to-r from-emerald-600 to-emerald-500 flex items-center justify-center"
                         style="clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 text-white">
                            <path fill-rule="evenodd" d="M8.603 3.799A4.49 4.49 0 0112 2.25c1.357 0 2.573.6 3.397 1.549a4.49 4.49 0 013.498 1.307 4.491 4.491 0 011.307 3.497A4.49 4.49 0 0121.75 12a4.49 4.49 0 01-1.549 3.397 4.491 4.491 0 01-1.307 3.497 4.491 4.491 0 01-3.497 1.307A4.49 4.49 0 0112 21.75a4.49 4.49 0 01-3.397-1.549 4.49 4.49 0 01-3.498-1.306 4.491 4.491 0 01-1.307-3.498A4.49 4.49 0 012.25 12c0-1.357.6-2.573 1.549-3.397a4.49 4.49 0 011.307-3.497 4.49 4.49 0 013.497-1.307zm7.007 6.387a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z" clip-rule="evenodd" />
                        </svg>
                    </div>
                </div>
                <h2 class="text-base font-medium text-gray-700">Net Profit</h2>
            </div>

            <div class="ps-14">
                <h3 class="text-2xl font-semibold text-gray-900">@(transactions.Sum(t => t.Amount).ToString("C", CultureInfo.InvariantCulture))</h3>
                <p class="text-xs text-gray-500 mt-1">Revenue - Expenses</p>

                <div class="flex items-center gap-2 mt-2">
                    <div class="flex items-center text-green-600 px-2 py-1 rounded text-xs font-medium">
                        <span>@(transactions.Count(t => t.Status == "Completed")) Completed</span>
                    </div>
                    <div class="flex items-center text-yellow-600 px-2 py-1 text-xs font-medium">
                        <span>@(transactions.Count(t => t.Status == "Pending")) Pending</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Transaction Table -->
    <div class="bg-white rounded-xl shadow-sm overflow-hidden mt-3">
        <div class="bg-white dark:bg-gray-800 rounded-t-xl shadow-sm border border-gray-100 dark:border-gray-700 p-6">
            <!-- Header Section -->
            <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6 mb-6">
                <!-- Title Section -->
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-primary/10 rounded-full">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 text-primary">
                            <path d="M12 7.5a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5z" />
                            <path fill-rule="evenodd" d="M1.5 4.875C1.5 3.839 2.34 3 3.375 3h17.25c1.035 0 1.875.84 1.875 1.875v9.75c0 1.036-.84 1.875-1.875 1.875H3.375A1.875 1.875 0 011.5 14.625v-9.75zM8.25 9.75a3.75 3.75 0 117.5 0 3.75 3.75 0 01-7.5 0zM18.75 9a.75.75 0 00-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 00.75-.75V9.75a.75.75 0 00-.75-.75h-.008zM4.5 9.75A.75.75 0 015.25 9h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75H5.25a.75.75 0 01-.75-.75V9.75z" clip-rule="evenodd" />
                            <path d="M2.25 18a.75.75 0 000 1.5c5.4 0 10.63.722 15.6 2.075 1.19.324 2.4-.558 2.4-1.82V18.75a.75.75 0 00-.75-.75H2.25z" />
                        </svg>
                    </div>
                    <div>
                        <h2 class="text-xl font-semibold text-primary dark:text-white">Transaction History</h2>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Track and manage all business transactions</p>
                    </div>
                </div>

                <!-- Search Section -->
                <div class="flex-1 max-w-xl">
                    <form class="w-full">
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none">
                                <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                </svg>
                            </div>
                            <input type="search"
                                   class="block w-full pl-12 pr-28 py-3.5 text-sm text-gray-900 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-200 dark:text-white dark:placeholder-gray-400"
                                   placeholder="Search transactions ..."
                                   required />
                            <button type="submit"
                                    class="absolute right-2 top-1/2 transform -translate-y-1/2 px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-emerald-600 rounded-lg transition-all duration-200 focus:ring-2 focus:ring-primary/20 flex items-center gap-2 cursor-pointer">
                                Search
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Action Buttons -->
                <div class="flex items-center gap-3">
                    <!-- Export Button -->
                    <a href="#"
                       class="px-4 py-3 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-sm text-gray-700 dark:text-gray-300 font-medium transition-all duration-200 shadow-sm hover:shadow-md hover:bg-gray-50 dark:hover:bg-gray-600 focus:ring-2 focus:ring-gray-200 dark:focus:ring-gray-600 flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                        Export
                    </a>
                </div>
            </div>

            <!-- Filters Section -->
            <div class="bg-gray-50 dark:bg-gray-700/50 rounded-xl border border-gray-200 dark:border-gray-600 p-5">
                <!-- Filters Header -->
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-3">
                        <svg class="w-5 h-5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z" />
                        </svg>
                        <h3 class="font-semibold text-gray-900 dark:text-white">Filter Options</h3>
                    </div>
                    <span class="text-xs text-gray-500 dark:text-gray-400 px-2 py-1 bg-white dark:bg-gray-600 rounded-lg">3 filters</span>
                </div>

                <!-- Filters Form -->
                <form id="filtersForm" method="GET" class="flex flex-col lg:flex-row lg:items-end justify-between gap-4">
                    <!-- Filter Controls -->
                    <div class="flex flex-col sm:flex-row gap-4 flex-1">
                        <!-- Time Period Filter -->
                        <div class="flex flex-col gap-2">
                            <label for="timePeriodSelect" class="text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide">
                                Time Period
                            </label>
                            <div class="relative">
                                <select id="timePeriodSelect"
                                        class="w-full min-w-[200px] appearance-none text-gray-900 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-xl py-3 px-4 pr-10 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-200 cursor-pointer shadow-sm">
                                    <option value="all">All Time</option>
                                    <option value="daily">Daily</option>
                                    <option value="weekly">Weekly</option>
                                    <option value="monthly">Monthly</option>
                                    <option value="yearly">Yearly</option>
                                </select>
                            </div>
                        </div>

                        <!-- Transaction Type Filter -->
                        <div class="flex flex-col gap-2">
                            <label for="transactionTypeSelect" class="text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide">
                                Transaction Type
                            </label>
                            <div class="relative">
                                <select id="transactionTypeSelect"
                                        class="w-full min-w-[200px] appearance-none text-gray-900 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-xl py-3 px-4 pr-10 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-200 cursor-pointer shadow-sm">
                                    <option value="all">All Types</option>
                                    <option value="sales-order">Sales Order</option>
                                    <option value="purchase-order">Purchase Order</option>
                                    <option value="expenses">Expenses</option>
                                </select>
                            </div>
                        </div>

                        <!-- Status Filter -->
                        <div class="flex flex-col gap-2">
                            <label for="transactionStatusSelect" class="text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide">
                                Status
                            </label>
                            <div class="relative">
                                <select id="transactionStatusSelect"
                                        class="w-full min-w-[200px] appearance-none text-gray-900 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-xl py-3 px-4 pr-10 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-200 cursor-pointer shadow-sm">
                                    <option value="all">All Status</option>
                                    <option value="completed">Completed</option>
                                    <option value="pending">Pending</option>
                                    <option value="cancelled">Cancelled</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex items-center gap-3 pt-2">
                        <!-- Filter Button -->
                        <button type="submit"
                                class="px-5 py-3 bg-primary hover:bg-emerald-600 text-white rounded-xl text-sm font-medium transition-all duration-200 shadow-sm hover:shadow-md focus:ring-2 focus:ring-primary/20 flex items-center gap-2 cursor-pointer">
                            Apply Filters
                        </button>

                        <!-- Reset Button -->
                        <button id="resetFilters" type="button"
                                class="px-4 py-3 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-xl text-sm text-gray-700 dark:text-gray-300 font-medium transition-all duration-200 shadow-sm hover:shadow-md hover:bg-gray-50 dark:hover:bg-gray-500 focus:ring-2 focus:ring-gray-200 dark:focus:ring-gray-600 flex items-center gap-2 cursor-pointer">
                            Reset
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <div class="overflow-hidden mb-2">
            <table class="min-w-full divide-y divide-gray-200 text-sm">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-5 text-left font-medium text-gray-700 uppercase tracking-wide">Transaction ID</th>
                        <th class="px-6 py-5 text-left font-medium text-gray-700 uppercase tracking-wide">Type</th>
                        <th class="px-6 py-5 text-left font-medium text-gray-700 uppercase tracking-wide">Description</th>
                        <th class="px-6 py-5 text-left font-medium text-gray-700 uppercase tracking-wide">Amount</th>
                        <th class="px-6 py-5 text-left font-medium text-gray-700 uppercase tracking-wide">Date</th>
                        <th class="px-6 py-5 text-left font-medium text-gray-700 uppercase tracking-wide">Status</th>
                        <th class="px-6 py-5 text-left font-medium text-gray-700 uppercase tracking-wide">Actions</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-100">
                    @foreach (var transaction in transactions)
                    {
                        <tr class="hover:bg-gray-50 transition-colors">
                            <td class="px-6 py-4 text-gray-800 font-medium">@transaction.Id</td>
                            <td class="px-6 py-4">
                                <span class="px-2.5 py-0.5 text-xs font-medium rounded-full @GetTypeBadgeClass(transaction.Type)">
                                    @transaction.Type
                                </span>
                            </td>
                            <td class="px-6 py-4 text-gray-600">@transaction.Description</td>
                            <td class="px-6 py-4 font-medium @(transaction.Amount >= 0 ? "text-green-600" : "text-red-600")">
                                @transaction.Amount.ToString("C", CultureInfo.InvariantCulture)
                            </td>
                            <td class="px-6 py-4 text-gray-600">@transaction.Date.ToString("MMM dd, yyyy hh:mm tt", CultureInfo.InvariantCulture)</td>
                            <td class="px-6 py-4">
                                <span class="px-2.5 py-0.5 text-xs font-medium rounded-full @GetStatusBadgeClass(transaction.Status)">
                                    @transaction.Status
                                </span>
                            </td>
                            <td class="px-6 py-4 align-middle">
                                    <!-- View Button -->
                                    <div class="relative group">
                                        <button class="text-gray-600 hover:text-primary/90 transition-colors duration-200 p-1 rounded cursor-pointer">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                                                <path fill-rule="evenodd" d="M10.5 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z" clip-rule="evenodd" />
                                            </svg>
                                        </button>
                                        <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-primary rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-10">
                                            Action Menu
                                            <div class="absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-primary">
                                            </div>
                                        </div>
                                    </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
        <!-- Pagination -->
        <div class="bg-white px-6 py-4 border-t border-gray-200">
            <div class="flex items-center justify-between">
                <div class="text-sm text-gray-700">
                    Showing <span class="font-medium">1</span> to
                    <span class="font-medium">5</span> of
                    <span class="font-medium">10</span> results
                </div>
                <div class="flex items-center justify-center gap-1">
                    <!-- First -->
                    <button class="flex items-center justify-center w-7 h-7 text-xs border border-gray-300 rounded-full hover:bg-gray-50 transition-colors"
                            title="First Page">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7" />
                        </svg>
                    </button>

                    <!-- Previous -->
                    <button class="flex items-center justify-center w-7 h-7 text-xs border border-gray-300 rounded-full hover:bg-gray-50 transition-colors"
                            title="Previous">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>

                    <!-- Pages -->
                    <button class="flex items-center justify-center w-7 h-7 text-xs font-medium rounded-full bg-primary text-white border border-primary">
                        1
                    </button>
                    <button class="flex items-center justify-center w-7 h-7 text-xs border border-gray-300 rounded-full hover:bg-gray-50">
                        2
                    </button>
                    <button class="flex items-center justify-center w-7 h-7 text-xs border border-gray-300 rounded-full hover:bg-gray-50">
                        3
                    </button>
                    <span class="text-xs text-gray-400 px-1">...</span>
                    <button class="flex items-center justify-center w-7 h-7 text-xs border border-gray-300 rounded-full hover:bg-gray-50">
                        8
                    </button>

                    <!-- Next -->
                    <button class="flex items-center justify-center w-7 h-7 text-xs border border-gray-300 rounded-full hover:bg-gray-50"
                            title="Next">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </button>

                    <!-- Last -->
                    <button class="flex items-center justify-center w-7 h-7 text-xs border border-gray-300 rounded-full hover:bg-gray-50"
                            title="Last Page">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7M5 5l7 7-7 7" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    @code {
        private bool _initialized;

        // protected override async Task OnAfterRenderAsync(bool firstRender)
        // {
        //     if (!_initialized)
        //     {
        //         await JS.InvokeVoidAsync("SetupTransactionJS");
        //         _initialized = true;
        //     }
        // }

        public class Transaction
        {
            public string Id { get; set; }
            public string Type { get; set; }
            public string Description { get; set; }
            public decimal Amount { get; set; }
            public DateTime Date { get; set; }
            public string Status { get; set; }
        }

        private List<Transaction> transactions = new()
        {
        new Transaction { Id="TRX-001", Type="Sales Order", Description="Product Sales - Laptop", Amount=1200.50m, Date=DateTime.Parse("2024-03-20 14:15"), Status="Completed" },
        new Transaction { Id="TRX-002", Type="Purchase Order", Description="Office Supplies", Amount=-350.75m, Date=DateTime.Parse("2024-03-22 11:20"), Status="Completed" },
        new Transaction { Id="TRX-003", Type="Expenses", Description="Utility Bills", Amount=-120.00m, Date=DateTime.Parse("2024-03-25 09:45"), Status="Completed" },
        new Transaction { Id="TRX-004", Type="Sales Order", Description="Software License", Amount=450.00m, Date=DateTime.Parse("2024-03-28 16:30"), Status="Pending" },
        new Transaction { Id="TRX-005", Type="Purchase Order", Description="Inventory Restock", Amount=-850.25m, Date=DateTime.Parse("2024-03-30 10:15"), Status="Completed" }
        };

        private string GetTypeBadgeClass(string type)
        {
            return type switch
            {
                "Sales Order" => "bg-green-100 text-green-800",
                "Purchase Order" => "bg-violet-100 text-violet-800",
                "Expenses" => "bg-orange-100 text-orange-800",
                _ => "bg-gray-100 text-gray-800"
            };
        }

        private string GetStatusBadgeClass(string status)
        {
            return status switch
            {
                "Completed" => "bg-green-100 text-green-800",
                "Pending" => "bg-yellow-100 text-yellow-800",
                "Cancelled" => "bg-red-100 text-red-800",
                _ => "bg-gray-100 text-gray-800"
            };
        }
    }
</AuthGuard>